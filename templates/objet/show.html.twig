{% extends 'base.html.twig' %}

{% block title %}MyLoc{% endblock %}

{% block body %}
    <div class="container">
<<<<<<< HEAD
        <div class= "justify-content-center">
            <img src="/uploads/{{ objet.thumbnail }}" class="img-fluid mx-auto d-block" alt="..." >
        </div>
        <h5 class="text-center mb-5"style="text-transform:uppercase">{{ objet.name }}</h5>
        <div class="container w-50">
            <p class="mb-5">{{objet.description}}</p>
            <div class="d-flex justify-content-between">
            {% if app.user == none or app.user.id != objet.owner.id  %}
                <p class="card-text" style="color:blue; text-decoration: none">{{objet.owner.username}}</p>
            {% else %}
                <a href="/profile"><p class="card-text">{{objet.owner.username}}</p></a>
            {% endif %}
            <a href="/category/{{objet.category.id}}"><p style="color:green">{{objet.category}}</p></a>

            </div>
            <div class="mt-3">
   
             {% for emprunt in objet.emprunts %}
                    {% if date >= emprunt.DateStart|date('d/m/Y') and date <= emprunt.DateEnd|date('d/m/Y') %}
                        <div class="d-flex justify-content-between mt-2">
                            <p>Jusqu'au:{{emprunt.DateEnd|date('d/m/Y')}}</p>
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="red" class="bi bi-circle-fill mt-2" viewBox="0 0 16 16">
                            <circle cx="8" cy="8" r="8"/>
                            </svg>
                            
                        </div>
                            {% else %}
                                {% if date < emprunt.DateStart|date('d/m/Y') %}
                                <div class="d-flex justify-content-between mt-2">
                                    <p>Prochaine réservation <br> {{emprunt.DateStart|date('d/m/Y')}}</p>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="green" class="bi bi-circle-fill mt-2" viewBox="0 0 16 16">
                                    <circle cx="8" cy="8" r="8"/>
                                    </svg>  
                                </div>
                    {% else %}
                        <div class="d-flex justify-content-between mt-2">
                            <p>Disponible</p>
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="green" class="bi bi-circle-fill mt-2" viewBox="0 0 16 16">
                            <circle cx="8" cy="8" r="8"/>
                            </svg>
                        </div>
                    {% endif %}
                    {% endif %}
                {% endfor %}
            </div>
            <!--prochaine date dispo-->
        {% if app.user == none %}
            <a href="/login"><p class="btn btn-info">Connectez-vous pour réserver</p></a>
            {% else %}
                
                {% if app.user.id == objet.owner.id %}
                        <a href="/objets/show/{{ objet.id }}/update" class="btn btn-primary">Modifier</a>
                        <a href="/objets/show/{{ objet.id }}/delete" class="btn btn-primary">Supprimer</a>
                    {% else %}
                        {% if app.user %}
                        <a href="/emprunt/{{ objet.id }}" class="btn btn-primary">Réserver</a>
                    {% endif %}
                {% endif %}
            {% endif %}
=======
        <img src="uploads/{{ objet.thumbnail }}" class="card-img-top" alt="...">
        <h5 class="text-center m-1"style="text-transform:uppercase">{{ objet.name }}</h5>
        <div class="container">
            <p>{{objet.description}}</p>
            <div class="d-flex justify-content-between">
                <p style="color:green">{{objet.category}}</p>
                <p style='color:blue'>{{objet.owner.username}}</p>
            </div>
            <div>
            <h6>Prochaine réservation</h6>
            
            </div>
            <!--prochaine date dispo-->
        {% if app.user %}
          <a href="/emprunt/{{ objet.id }}" class="btn btn-primary">Réserver</a>
        {% else %}
            <p>Connectez-vous pour réserver</p>
        {% endif %}
>>>>>>> origin/main
        </div>
    </div>
    
{% endblock %}